{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/refs.js","../src/js/render-functions.js","../src/js/scroll.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport axios from \"axios\";\n\nconst articlesApi = axios.create({\n    baseURL: 'https://pixabay.com/',\n});\n\nexport async function getImages(inputValue, currentPage, perPage) {\n    try{\n        const params = {\n            key: '44652974-093c0b9338f58db6242e87a44',\n            q: inputValue,\n            image_type: 'photo',\n            orientation: 'horizontal',\n            safesearch: true,\n            page: currentPage,\n            per_page: perPage,       \n};\n\nconst res = await articlesApi.get('api/', { params });\nreturn res.data;\n} catch (error) {\n    iziToast.error({\n        title: 'Error',\n          message: `${error}`,\n          layout: 2,\n          displayMode: 'once',\n          backgroundColor: '#ef4040',\n          progressBarColor: '#B51B1B',\n          position: 'topRight',\n    });\n}\n}","export const refs = {\nform: document.querySelector('.form'),\ninput: document.querySelector('.input'),\nbutton: document.querySelector('.button'),\ngallery: document.querySelector('.gallery'),\nloader: document.querySelector('.loader'),\nloadMoreBtn: document.querySelector('.load-more-btn'),\n};","import iziToast from \"izitoast\";\nimport { refs } from './refs';\n\nexport let markup ='';\nexport async function imagesTemplate(imagesObj) {\n    let markup = imagesObj\n    .map(image => {\n        return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\"\n        href=\"${image.largeImageURL}\">\n        <image class=\"gallery-image\"\n        src=\"${image.webformatURL}\"\n        alt=\"${image.tags}\"/>\n        </a>\n        <div class=\"text-card-container\">\n        <ul class=\"text-list\">\n\n        <li class=\"text-item\">\n        <p class=\"text-item-name\"><strong>Likes:</strong></p>\n        <p class=\"text-item-quantity\">${image.likes}</p>\n        </li>\n\n        <li class=\"text-item\">\n        <p class=\"text-item-name\"><strong>Views:</strong></p>\n        <p class=\"text-item-quantity\">${image.views}</p>\n        </li>\n\n        <li class=\"text-item\">\n        <p class=\"text-item-name\"><strong>Comments:</strong></p>\n        <p class=\"text-item-quantity\">${image.comments}</p>\n        </li>\n\n        <li class=\"text-item\">\n        <p class=\"text-item-name\"><strong>Downloads:</strong></p>\n        <p class=\"text-item-quantity\">${image.downloads}</p>\n        </li>\n\n        </ul>\n        </div>\n        </li>`;\n    })\n    .join('');\n    refs.gallery.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function showLoader() {\n    refs.loader.classList.remove('hidden');\n}\nexport function hideLoader() {\n    refs.loader.classList.add('hidden');\n}\n\nexport function showLoadMore() {\n    refs.loadMoreBtn.classList.remove('hidden');\n}\nexport function hideLoadMore() {\n    refs.loadMoreBtn.classList.add('hidden');\n}\n\nexport function checkEndPages(currentPage, maxPage) {\n    if(currentPage >= maxPage) {\n        hideLoadMore();\n        if (maxPage) {\n            iziToast.info({\n                title: 'The end!',\n                message: \"We're sorry, but you've reached the end of search results.\",\n            });\n        }\n        } else {\n            showLoadMore();   \n        }\n    }\n","import { refs } from './refs';\n\nexport function skipOldElement(x = 0, y = 0) {\n    const liEl = refs.gallery.children[0];\n    const height = liEl.getBoundingClientRect().height;\n\n    window.scrollBy({\n        top: height * 2,\n        left: y,\n        behavior: 'smooth',\n    });\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n// Описаний в документації\nimport SimpleLightbox from \"simplelightbox\";\n// Додатковий імпорт стилів\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\n\nimport { getImages } from \"./js/pixabay-api\";\nimport {showLoader, imagesTemplate, showLoadMore, hideLoadMore, checkEndPages, hideLoader} from './js/render-functions';\nimport { refs } from \"./js/refs\";\nimport { skipOldElement } from \"./js/scroll\";\n\nlet inputValue = '';\nlet currentPage = 1;\nlet perPage = 15;\nlet maxPage = 1;\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n    captions: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n});\n\nrefs.form.addEventListener('submit', async e => {\n    e.preventDefault();\n    inputValue = e.target.elements.text.value.trim();\n    currentPage = 1;\n    hideLoadMore();\n\n    if (inputValue === '') { \n        refs.gallery.innerHTML = ' ';\n        iziToast.warning({\n            title: 'Warning',\n            message: `Please, enter the query`,\n            layout: 2,\n            displayMode: 'once',\n            backgroundColor: '#ef4040',\n            position:'topRight',\n        });\n        refs.form.reset();\n        return;\n    }\n\n    showLoader();\nrefs.gallery.innerHTML = ' ';\n    try {\n        const data = await getImages(inputValue, currentPage, perPage);\n        maxPage = Math.ceil(data.totalHits / perPage);\n        if(maxPage === 0) {\n            iziToast.error({\n                message: \"Sorry, there are no images matching your search query. Please try again!\",\n                layout: 2,\n                displayMode: 'once',\n                backgroundColor: '#ef4040',\n                progressBarColor: '#B51B1B',\n                position:'topRight',\n            });\n            refs.form.reset();\n            hideLoader();\n            return;\n        }\n        hideLoader();\n        refs.form.reset();\n        imagesTemplate(data.hits);\n        lightbox.refresh();\n        showLoadMore();\n        }catch(error) {\n        iziToast.error({\n            title: 'Error',\n            message: `${error}`,\n            layout: 2,\n            displayMode: 'once',\n            backgroundColor: '#ef4040',\n            progressBarColor: '#B51B1B',\n            position:'topRight',   \n        });\n    }\n});\n\nrefs.loadMoreBtn.addEventListener('click', async () => {\n    hideLoadMore();\n    showLoader();\n    try {\n        currentPage++;\n\n        const data = await getImages(inputValue, currentPage, perPage);\n        if(data.hits.lenght !== 0) {\n            imagesTemplate(data.hits);\n            lightbox.refresh();\n            hideLoader();\n        }\n        checkEndPages(currentPage, maxPage);\n        skipOldElement();\n    }catch(error) {\n        refs.gallery.innerHTML = ' ';\n\n        iziToast.error({\n            title: 'Error',\n            message: `${error}`,\n            layout: 2,\n            displayMode: 'once',\n            backgroundColor: '#ef4040',\n            progressBarColor: '#B51B1B',\n            position:'topRight',   \n    });\n}\n});"],"names":["articlesApi","axios","getImages","inputValue","currentPage","perPage","params","error","iziToast","refs","imagesTemplate","imagesObj","markup","image","showLoader","hideLoader","showLoadMore","hideLoadMore","checkEndPages","maxPage","skipOldElement","x","y","height","lightbox","SimpleLightbox","e","data"],"mappings":"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"}